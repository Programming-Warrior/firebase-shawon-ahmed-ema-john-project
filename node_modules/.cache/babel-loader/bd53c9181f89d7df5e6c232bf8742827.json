{"ast":null,"code":"var _jsxFileName = \"C:\\\\webDevelopment\\\\myProjects\\\\firebase-Ema-John-master\\\\src\\\\components\\\\Login\\\\Login.js\";\nimport React, { useContext } from 'react';\nimport { useState } from 'react';\nimport { UserContext } from '../../App';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { initializeLoginFramework } from './LoginManager';\n\nfunction Login() {\n  const [newUser, setNewUser] = useState(false);\n  const [user, setUser] = useState({\n    isSignedIn: false,\n    name: '',\n    email: '',\n    photo: '',\n    password: '',\n    error: '',\n    success: false\n  });\n  initializeLoginFramework();\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n  const history = useHistory();\n  const location = useLocation();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut().then(res => {\n      const signedOutUser = {\n        isSignedIn: false,\n        name: '',\n        phone: '',\n        email: ''\n      };\n      setUser(signedOutUser);\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleSubmit = e => {\n    if (newUser && user.email && user.password) {\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      }).catch(error => {\n        // Handle Errors here.\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode, errorMessage); // ...\n      });\n    }\n\n    if (!newUser && user.email && user.password) {\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        setLoggedInUser(newUserInfo);\n        history.replace(from);\n        console.log('sign in User Info', res.user);\n      }).catch(error => {\n        // Handle Errors here.\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode, errorMessage); // ...\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  const handleBlur = e => {\n    let isFeildValid = true;\n\n    if (e.target.name === 'email') {\n      isFeildValid = /^\\S+@\\S+$/.test(e.target.value);\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length > 6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFeildValid = isPasswordValid && passwordHasNumber;\n    }\n\n    if (isFeildValid) {\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e.target.name] = e.target.value;\n      setUser(newUserInfo);\n    }\n  };\n\n  const updateUserName = name => {\n    const user = firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: name\n    }).then(() => {\n      console.log('user name updated succesfully'); // Update successful.\n    }).catch(error => {\n      // An error happened.\n      console.log(error);\n    });\n  }; // const handleFbSignIn = () => {\n  //   firebase.auth().signInWithPopup(fbProvider).then((result) => {\n  //     // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n  //     var token = result.credential.accessToken;\n  //     // The signed-in user info.\n  //     var user = result.user;\n  //     // ...\n  //   }).catch(function(error) {\n  //     // Handle Errors here.\n  //     var errorCode = error.code;\n  //     var errorMessage = error.message;\n  //     // The email of the user's account used.\n  //     var email = error.email;\n  //     // The firebase.auth.AuthCredential type that was used.\n  //     var credential = error.credential;\n  //     // ...\n  //   });\n  // }\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '150px',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 4\n    }\n  }, user.isSignedIn ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignOut,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 25\n    }\n  }, \"Sign out\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleGoogleSignIn,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 6\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleFbSignIn,\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }\n  }, \"Log in Using Facebook\"), user.isSignedIn && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 26\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 32\n    }\n  }, \"Welcome \", /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      borderRadius: '50%',\n      width: '100px',\n      height: '100px'\n    },\n    src: user.photo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 44\n    }\n  }), \" \", user.name, \" To this Finance Project.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 8\n    }\n  }, \"Your Email:\", user.email)), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 6\n    }\n  }, \"Our Own Authentication \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    onChange: () => setNewUser(!newUser),\n    name: \"newUser\",\n    id: \"newUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"newUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 6\n    }\n  }, \"New User Sign Up\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    action: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 5\n    }\n  }, newUser && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    onBlur: handleBlur,\n    placeholder: \"Your Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 94\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    onBlur: handleBlur,\n    placeholder: \"Your Email Address\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 100\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onBlur: handleBlur,\n    placeholder: \"password\",\n    name: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 98\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: newUser ? 'Sign Up' : 'Sign In',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red',\n      background: 'black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 5\n    }\n  }, user.error), user.success && /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 24\n    }\n  }, \"User \", newUser ? 'Created' : 'logged in', \" Successfully done by you. Thank you very much...\"));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/webDevelopment/myProjects/firebase-Ema-John-master/src/components/Login/Login.js"],"names":["React","useContext","useState","UserContext","useHistory","useLocation","initializeLoginFramework","Login","newUser","setNewUser","user","setUser","isSignedIn","name","email","photo","password","error","success","loggedInUser","setLoggedInUser","history","location","from","state","pathname","handleSignOut","firebase","auth","signOut","then","res","signedOutUser","phone","console","log","catch","err","handleSubmit","e","createUserWithEmailAndPassword","newUserInfo","updateUserName","message","errorCode","code","errorMessage","signInWithEmailAndPassword","replace","preventDefault","handleBlur","isFeildValid","target","test","value","isPasswordValid","length","passwordHasNumber","currentUser","updateProfile","displayName","marginTop","textAlign","handleGoogleSignIn","handleFbSignIn","borderRadius","width","height","color","background"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\n\nimport { useState } from 'react';\nimport { UserContext } from '../../App';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { initializeLoginFramework } from './LoginManager';\n\n\n\nfunction Login() {\n   \n\n    const [newUser, setNewUser] =useState(false);\n    const [user,setUser] = useState({\n    isSignedIn :false,\n    name : '',\n    email:'',\n    photo:'',\n    password:'',\n    error:'',\n    success:false,\n  \n  });\n\n  initializeLoginFramework();\n\n  \n \n\n  \n\n  const [loggedInUser,setLoggedInUser] = useContext(UserContext);\n  const history = useHistory();\n  const location = useLocation();\n  let { from } = location.state || { from: { pathname: \"/\" } };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut()\n    .then(res=>{\n      const signedOutUser = ({\n        isSignedIn:false,\n        name:'',\n        phone:'',\n        email:'',\n\n      })\n      setUser(signedOutUser);\n      console.log(res);\n    })\n    .catch(err =>{\n      console.log(err);\n    })\n  }\n  const handleSubmit=(e) =>{\n    if( newUser && user.email && user.password){\n      \n       firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\n\n      .then(res=>{\n        const newUserInfo = {...user};\n      newUserInfo.error = '';\n      newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      })\n      .catch((error)=> {\n        // Handle Errors here.\n        const newUserInfo = {...user};\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode,errorMessage);\n        // ...\n      });\n    }\n\n    if( !newUser && user.email && user.password){\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password)\n      .then(res => {\n        const newUserInfo = {...user};\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n          setUser(newUserInfo);\n          setLoggedInUser(newUserInfo);\n          history.replace(from);\n          console.log('sign in User Info',res.user);\n      })\n      .catch(error=> {\n        // Handle Errors here.\n        const newUserInfo = {...user};\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode,errorMessage);\n        // ...\n      });\n    }\n    e.preventDefault();\n  }\n\n  const handleBlur = (e) =>{\n    let isFeildValid=true;\n    if(e.target.name === 'email'){\n      isFeildValid = /^\\S+@\\S+$/.test(e.target.value);\n     \n    }\n    if(e.target.name === 'password'){\n      const isPasswordValid = e.target.value.length>6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFeildValid = (isPasswordValid && passwordHasNumber);\n    }\n    if(isFeildValid){\n        const newUserInfo = {...user};\n        newUserInfo[e.target.name] = e.target.value;\n        setUser(newUserInfo);\n    }\n  }\n\n  const updateUserName = (name) => {\n    const user = firebase.auth().currentUser;\n\n    user.updateProfile({\n      displayName: name,\n    }).then(()=> {\n      console.log('user name updated succesfully');\n      // Update successful.\n    }).catch((error)=> {\n      // An error happened.\n      console.log(error);\n    });\n  } \n  // const handleFbSignIn = () => {\n  //   firebase.auth().signInWithPopup(fbProvider).then((result) => {\n  //     // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n  //     var token = result.credential.accessToken;\n  //     // The signed-in user info.\n  //     var user = result.user;\n  //     // ...\n  //   }).catch(function(error) {\n  //     // Handle Errors here.\n  //     var errorCode = error.code;\n  //     var errorMessage = error.message;\n  //     // The email of the user's account used.\n  //     var email = error.email;\n  //     // The firebase.auth.AuthCredential type that was used.\n  //     var credential = error.credential;\n  //     // ...\n  //   });\n  // }\n\n  return (\n   <div style={{marginTop:'150px', textAlign:'center'}}>\n     \n    {\n      user.isSignedIn ? <button onClick={handleSignOut} className=\"btn btn-primary\">Sign out</button>\n      :\n     <button onClick={handleGoogleSignIn}\n      className=\"btn btn-primary\">Sign in</button>\n    }\n    <br/>\n    <button onClick={handleFbSignIn} className=\"btn btn-success\">Log in Using Facebook</button>\n     {\n       user.isSignedIn &&<div> <h1>Welcome <img style={{borderRadius:'50%', width:'100px', height:'100px'}} src={user.photo} alt=\"\"/> {user.name} To this Finance Project.</h1> \n       <p>Your Email:{user.email}</p>\n       \n       \n\n       </div>\n     }\n     <h1>Our Own Authentication </h1>\n     <input type=\"checkbox\" onChange={()=> setNewUser(!newUser)} name=\"newUser\" id=\"newUser\"/>\n     <label htmlFor=\"newUser\">New User Sign Up</label>\n    <form onSubmit ={handleSubmit} action=\"\">\n    {newUser && <input type=\"text\" name=\"name\" onBlur={handleBlur} placeholder=\"Your Name\"/>}<br/>\n    <input type=\"text\" name=\"email\" onBlur={handleBlur} placeholder=\"Your Email Address\" required/><br/>\n     <input type=\"password\" onBlur={handleBlur} placeholder=\"password\" name=\"password\" required/><br/>\n     <input type=\"submit\" value={newUser ? 'Sign Up' : 'Sign In'}/>\n    </form>\n    <p style={{color:'red',background:'black'}}>{user.error}</p>\n     {\n       user.success && <h1 style={{color:'green'}}>User { newUser ? 'Created' : 'logged in'} Successfully done by you. Thank you very much...</h1>\n     }\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}