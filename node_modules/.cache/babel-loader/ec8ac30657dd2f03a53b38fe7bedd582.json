{"ast":null,"code":"var _jsxFileName = \"C:\\\\webDevelopment\\\\myProjects\\\\firebase-Ema-John-master\\\\src\\\\components\\\\Login\\\\Login.js\";\nimport React, { useContext } from 'react';\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from './firebase.config';\nimport { useState } from 'react';\nimport { UserContext } from '../../App';\nimport { useHistory, useLocation } from 'react-router-dom';\nfirebase.initializeApp(firebaseConfig);\n\nfunction Login() {\n  const [newUser, setNewUser] = useState(false);\n  const [user, setUser] = useState({\n    isSignedIn: false,\n    name: '',\n    email: '',\n    photo: '',\n    password: '',\n    error: '',\n    success: false\n  });\n  const provider = new firebase.auth.GoogleAuthProvider();\n  var fbProvider = new firebase.auth.FacebookAuthProvider();\n\n  const handleSignIn = () => {\n    firebase.auth().signInWithPopup(provider).then(res => {\n      const {\n        displayName,\n        email,\n        photoURL\n      } = res.user;\n      const isSignedInUser = {\n        isSignedIn: true,\n        name: displayName,\n        email: email,\n        photo: photoURL\n      };\n      setUser(isSignedInUser);\n      console.log(displayName, email, photoURL);\n    }).catch(err => {\n      console.log(err);\n      console.log(err.message);\n    });\n  };\n\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n  const history = useHistory();\n  const location = useLocation();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut().then(res => {\n      const signedOutUser = {\n        isSignedIn: false,\n        name: '',\n        phone: '',\n        email: ''\n      };\n      setUser(signedOutUser);\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleSubmit = e => {\n    if (newUser && user.email && user.password) {\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      }).catch(error => {\n        // Handle Errors here.\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode, errorMessage); // ...\n      });\n    }\n\n    if (!newUser && user.email && user.password) {\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        setLoggedInUser(newUserInfo);\n        history.replace(from);\n        console.log('sign in User Info', res.user);\n      }).catch(error => {\n        // Handle Errors here.\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode, errorMessage); // ...\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  const handleBlur = e => {\n    let isFeildValid = true;\n\n    if (e.target.name === 'email') {\n      isFeildValid = /^\\S+@\\S+$/.test(e.target.value);\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length > 6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFeildValid = isPasswordValid && passwordHasNumber;\n    }\n\n    if (isFeildValid) {\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e.target.name] = e.target.value;\n      setUser(newUserInfo);\n    }\n  };\n\n  const updateUserName = name => {\n    const user = firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: name\n    }).then(() => {\n      console.log('user name updated succesfully'); // Update successful.\n    }).catch(error => {\n      // An error happened.\n      console.log(error);\n    });\n  };\n\n  const handleFbLogIn = () => {\n    firebase.auth().signInWithPopup(fbProvider).then(result => {\n      // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n      var token = result.credential.accessToken; // The signed-in user info.\n\n      var user = result.user; // ...\n    }).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message; // The email of the user's account used.\n\n      var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n      var credential = error.credential; // ...\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '150px',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 4\n    }\n  }, user.isSignedIn ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignOut,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, \"Sign out\") : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignIn,\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 6\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleFbLogIn,\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }\n  }, \"Log in Using Facebook\"), user.isSignedIn && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 26\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 32\n    }\n  }, \"Welcome \", /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      borderRadius: '50%',\n      width: '100px',\n      height: '100px'\n    },\n    src: user.photo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 44\n    }\n  }), \" \", user.name, \" To this Finance Project.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 8\n    }\n  }, \"Your Email:\", user.email)), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 6\n    }\n  }, \"Our Own Authentication \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    onChange: () => setNewUser(!newUser),\n    name: \"newUser\",\n    id: \"newUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"newUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 6\n    }\n  }, \"New User Sign Up\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    action: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }\n  }, newUser && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    onBlur: handleBlur,\n    placeholder: \"Your Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 94\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    onBlur: handleBlur,\n    placeholder: \"Your Email Address\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 100\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onBlur: handleBlur,\n    placeholder: \"password\",\n    name: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 98\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: newUser ? 'Sign Up' : 'Sign In',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red',\n      background: 'black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }, user.error), user.success && /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 24\n    }\n  }, \"User \", newUser ? 'Created' : 'logged in', \" Successfully done by you. Thank you very much...\"));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/webDevelopment/myProjects/firebase-Ema-John-master/src/components/Login/Login.js"],"names":["React","useContext","firebase","firebaseConfig","useState","UserContext","useHistory","useLocation","initializeApp","Login","newUser","setNewUser","user","setUser","isSignedIn","name","email","photo","password","error","success","provider","auth","GoogleAuthProvider","fbProvider","FacebookAuthProvider","handleSignIn","signInWithPopup","then","res","displayName","photoURL","isSignedInUser","console","log","catch","err","message","loggedInUser","setLoggedInUser","history","location","from","state","pathname","handleSignOut","signOut","signedOutUser","phone","handleSubmit","e","createUserWithEmailAndPassword","newUserInfo","updateUserName","errorCode","code","errorMessage","signInWithEmailAndPassword","replace","preventDefault","handleBlur","isFeildValid","target","test","value","isPasswordValid","length","passwordHasNumber","currentUser","updateProfile","handleFbLogIn","result","token","credential","accessToken","marginTop","textAlign","borderRadius","width","height","color","background"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from './firebase.config';\nimport { useState } from 'react';\nimport { UserContext } from '../../App';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nfirebase.initializeApp(firebaseConfig);\n\nfunction Login() {\n   \n\n    const [newUser, setNewUser] =useState(false);\n    const [user,setUser] = useState({\n    isSignedIn :false,\n    name : '',\n    email:'',\n    photo:'',\n    password:'',\n    error:'',\n    success:false,\n  \n  });\n  const provider = new firebase.auth.GoogleAuthProvider();\n  var fbProvider = new firebase.auth.FacebookAuthProvider();\n  const handleSignIn = () => {\n    firebase.auth().signInWithPopup(provider)\n    .then(res=>{\n      const {displayName,email,photoURL} = res.user;\n      const isSignedInUser = {\n        isSignedIn:true,\n        name:displayName,\n        email:email,\n       \n        photo:photoURL,\n\n      }\n      setUser(isSignedInUser);\n      console.log(displayName,email,photoURL);\n    })\n    .catch(err=>{\n      console.log(err);\n      console.log(err.message);\n    })\n  }\n\n  const [loggedInUser,setLoggedInUser] = useContext(UserContext);\n  const history = useHistory();\n  const location = useLocation();\n  let { from } = location.state || { from: { pathname: \"/\" } };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut()\n    .then(res=>{\n      const signedOutUser = ({\n        isSignedIn:false,\n        name:'',\n        phone:'',\n        email:'',\n\n      })\n      setUser(signedOutUser);\n      console.log(res);\n    })\n    .catch(err =>{\n      console.log(err);\n    })\n  }\n  const handleSubmit=(e) =>{\n    if( newUser && user.email && user.password){\n      \n       firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\n\n      .then(res=>{\n        const newUserInfo = {...user};\n      newUserInfo.error = '';\n      newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      })\n      .catch((error)=> {\n        // Handle Errors here.\n        const newUserInfo = {...user};\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode,errorMessage);\n        // ...\n      });\n    }\n\n    if( !newUser && user.email && user.password){\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password)\n      .then(res => {\n        const newUserInfo = {...user};\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n          setUser(newUserInfo);\n          setLoggedInUser(newUserInfo);\n          history.replace(from);\n          console.log('sign in User Info',res.user);\n      })\n      .catch(error=> {\n        // Handle Errors here.\n        const newUserInfo = {...user};\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode,errorMessage);\n        // ...\n      });\n    }\n    e.preventDefault();\n  }\n\n  const handleBlur = (e) =>{\n    let isFeildValid=true;\n    if(e.target.name === 'email'){\n      isFeildValid = /^\\S+@\\S+$/.test(e.target.value);\n     \n    }\n    if(e.target.name === 'password'){\n      const isPasswordValid = e.target.value.length>6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFeildValid = (isPasswordValid && passwordHasNumber);\n    }\n    if(isFeildValid){\n        const newUserInfo = {...user};\n        newUserInfo[e.target.name] = e.target.value;\n        setUser(newUserInfo);\n    }\n  }\n\n  const updateUserName = (name) => {\n    const user = firebase.auth().currentUser;\n\n    user.updateProfile({\n      displayName: name,\n    }).then(()=> {\n      console.log('user name updated succesfully');\n      // Update successful.\n    }).catch((error)=> {\n      // An error happened.\n      console.log(error);\n    });\n  } \n  const handleFbLogIn = () => {\n    firebase.auth().signInWithPopup(fbProvider).then((result) => {\n      // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n      var token = result.credential.accessToken;\n      // The signed-in user info.\n      var user = result.user;\n      // ...\n    }).catch(function(error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n    });\n  }\n\n  return (\n   <div style={{marginTop:'150px', textAlign:'center'}}>\n     \n    {\n      user.isSignedIn ? <button onClick={handleSignOut} className=\"btn btn-primary\">Sign out</button>\n      :\n     <button onClick={handleSignIn} className=\"btn btn-primary\">Sign in</button>\n    }\n    <br/>\n    <button onClick={handleFbLogIn} className=\"btn btn-success\">Log in Using Facebook</button>\n     {\n       user.isSignedIn &&<div> <h1>Welcome <img style={{borderRadius:'50%', width:'100px', height:'100px'}} src={user.photo} alt=\"\"/> {user.name} To this Finance Project.</h1> \n       <p>Your Email:{user.email}</p>\n       \n       \n\n       </div>\n     }\n     <h1>Our Own Authentication </h1>\n     <input type=\"checkbox\" onChange={()=> setNewUser(!newUser)} name=\"newUser\" id=\"newUser\"/>\n     <label htmlFor=\"newUser\">New User Sign Up</label>\n    <form onSubmit ={handleSubmit} action=\"\">\n    {newUser && <input type=\"text\" name=\"name\" onBlur={handleBlur} placeholder=\"Your Name\"/>}<br/>\n    <input type=\"text\" name=\"email\" onBlur={handleBlur} placeholder=\"Your Email Address\" required/><br/>\n     <input type=\"password\" onBlur={handleBlur} placeholder=\"password\" name=\"password\" required/><br/>\n     <input type=\"submit\" value={newUser ? 'Sign Up' : 'Sign In'}/>\n    </form>\n    <p style={{color:'red',background:'black'}}>{user.error}</p>\n     {\n       user.success && <h1 style={{color:'green'}}>User { newUser ? 'Created' : 'logged in'} Successfully done by you. Thank you very much...</h1>\n     }\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}