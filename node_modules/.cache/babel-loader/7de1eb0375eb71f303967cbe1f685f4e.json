{"ast":null,"code":"import * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from './firebase.config';\nexport const initializeLoginFramework = () => {\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  }\n\n  ;\n};\nexport const handleGoogleSignIn = () => {\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  return firebase.auth().signInWithPopup(googleProvider).then(res => {\n    const {\n      displayName,\n      email,\n      photoURL\n    } = res.user;\n    const isSignedInUser = {\n      isSignedIn: true,\n      name: displayName,\n      email: email,\n      photo: photoURL\n    };\n    return isSignedInUser;\n    console.log(displayName, email, photoURL);\n  }).catch(err => {\n    console.log(err);\n    console.log(err.message);\n  });\n};\nexport const handleFbSignIn = () => {\n  var fbProvider = new firebase.auth.FacebookAuthProvider();\n  return firebase.auth().signInWithPopup(fbProvider).then(result => {\n    // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n    var token = result.credential.accessToken; // The signed-in user info.\n\n    var user = result.user;\n    return user; // ...\n  }).catch(function (error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message; // The email of the user's account used.\n\n    var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n    var credential = error.credential; // ...\n  });\n};\nexport const handleSignOut = () => {\n  return firebase.auth().signOut().then(res => {\n    const signedOutUser = {\n      isSignedIn: false,\n      name: '',\n      phone: '',\n      email: ''\n    };\n    return signedOutUser;\n    console.log(res);\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const createUserWithEmailAndPassword = (name, email, password) => {\n  return firebase.auth().createUserWithEmailAndPassword(email, password).then(res => {\n    const newUserInfo = res.user;\n    newUserInfo.error = '';\n    newUserInfo.success = true;\n    updateUserName(name);\n    return newUserInfo;\n  }).catch(error => {\n    // Handle Errors here.\n    const newUserInfo = {};\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n  });\n};\nexport const signInWithEamilAndPassword = () => {\n  firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n    const newUserInfo = { ...user\n    };\n    newUserInfo.error = '';\n    newUserInfo.success = true;\n    setUser(newUserInfo);\n    setLoggedInUser(newUserInfo);\n    history.replace(from);\n    console.log('sign in User Info', res.user);\n  }).catch(error => {\n    // Handle Errors here.\n    const newUserInfo = { ...user\n    };\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    setUser(newUserInfo);\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    console.log(errorCode, errorMessage); // ...\n  });\n};\n\nconst updateUserName = name => {\n  const user = firebase.auth().currentUser;\n  user.updateProfile({\n    displayName: name\n  }).then(() => {\n    console.log('user name updated succesfully'); // Update successful.\n  }).catch(error => {\n    // An error happened.\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["C:/webDevelopment/myProjects/ema-johnWith-firebase/src/components/Login/LoginManager.js"],"names":["firebase","firebaseConfig","initializeLoginFramework","apps","length","initializeApp","handleGoogleSignIn","googleProvider","auth","GoogleAuthProvider","signInWithPopup","then","res","displayName","email","photoURL","user","isSignedInUser","isSignedIn","name","photo","console","log","catch","err","message","handleFbSignIn","fbProvider","FacebookAuthProvider","result","token","credential","accessToken","error","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","phone","createUserWithEmailAndPassword","password","newUserInfo","success","updateUserName","signInWithEamilAndPassword","signInWithEmailAndPassword","setUser","setLoggedInUser","history","replace","from","currentUser","updateProfile"],"mappings":"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","sourcesContent":["import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from './firebase.config';\r\n\r\n\r\n\r\n\r\nexport const initializeLoginFramework = () => {\r\n  if (firebase.apps.length === 0) {\r\n    firebase.initializeApp(firebaseConfig);\r\n    };\r\n  };\r\n\r\nexport const handleGoogleSignIn = () => {\r\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n    return firebase.auth().signInWithPopup(googleProvider)\r\n    .then(res=>{\r\n      const {displayName,email,photoURL} = res.user;\r\n      const isSignedInUser = {\r\n        isSignedIn:true,\r\n        name:displayName,\r\n        email:email,\r\n       \r\n        photo:photoURL,\r\n\r\n      }\r\n     return isSignedInUser;\r\n      console.log(displayName,email,photoURL);\r\n    })\r\n    .catch(err=>{\r\n      console.log(err);\r\n      console.log(err.message);\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport const handleFbSignIn = () => {\r\n    var fbProvider = new firebase.auth.FacebookAuthProvider();\r\n    return firebase.auth().signInWithPopup(fbProvider).then((result) => {\r\n      // This gives you a Facebook Access Token. You can use it to access the Facebook API.\r\n      var token = result.credential.accessToken;\r\n      // The signed-in user info.\r\n      var user = result.user;\r\n      return user;\r\n      // ...\r\n    }).catch(function(error) {\r\n      // Handle Errors here.\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n      // The email of the user's account used.\r\n      var email = error.email;\r\n      // The firebase.auth.AuthCredential type that was used.\r\n      var credential = error.credential;\r\n      // ...\r\n    });\r\n}\r\n\r\nexport const handleSignOut = () => {\r\n   return firebase.auth().signOut()\r\n    .then(res=>{\r\n      const signedOutUser = ({\r\n        isSignedIn:false,\r\n        name:'',\r\n        phone:'',\r\n        email:'',\r\n\r\n      })\r\n      return signedOutUser;\r\n      console.log(res);\r\n    })\r\n    .catch(err =>{\r\n      console.log(err);\r\n    })\r\n}\r\n\r\nexport const createUserWithEmailAndPassword = (name,email,password)=>{\r\n  return firebase.auth().createUserWithEmailAndPassword(email,password)\r\n\r\n    .then(res=>{\r\n      const newUserInfo = res.user;\r\n      newUserInfo.error = '';\r\n      newUserInfo.success = true;\r\n      updateUserName(name);\r\n      return newUserInfo;\r\n    })\r\n    .catch((error)=> {\r\n      // Handle Errors here.\r\n      const newUserInfo = {};\r\n      newUserInfo.error = error.message;\r\n      newUserInfo.success = false;\r\n    \r\n    });\r\n}\r\n\r\nexport const signInWithEamilAndPassword = () => {\r\n    \r\n    firebase.auth().signInWithEmailAndPassword(user.email, user.password)\r\n      .then(res => {\r\n        const newUserInfo = {...user};\r\n        newUserInfo.error = '';\r\n        newUserInfo.success = true;\r\n          setUser(newUserInfo);\r\n          setLoggedInUser(newUserInfo);\r\n          history.replace(from);\r\n          console.log('sign in User Info',res.user);\r\n      })\r\n      .catch(error=> {\r\n        // Handle Errors here.\r\n        const newUserInfo = {...user};\r\n        newUserInfo.error = error.message;\r\n        newUserInfo.success = false;\r\n        setUser(newUserInfo);\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        console.log(errorCode,errorMessage);\r\n        // ...\r\n      });\r\n}\r\n\r\nconst updateUserName = (name) => {\r\n    const user = firebase.auth().currentUser;\r\n\r\n    user.updateProfile({\r\n      displayName: name,\r\n    }).then(()=> {\r\n      console.log('user name updated succesfully');\r\n      // Update successful.\r\n    }).catch((error)=> {\r\n      // An error happened.\r\n      console.log(error);\r\n    });\r\n  } \r\n"]},"metadata":{},"sourceType":"module"}